# 🚀 AI对话系统测试平台

一个先进的基于Web的AI对话系统测试平台，专注于提示词工程、多模型并行测试和智能评估。支持全球主流AI模型，提供企业级的对话系统测试解决方案。

## 🌟 核心功能

### 1. 🗨️ 主对话系统  
- **实时对话**：与多种AI模型进行实时对话交流
- **自动响应机制**：基于规则的智能自动回复系统
- **流式输出**：实时显示AI模型的思考和输出过程
- **消息管理**：强大的消息选择、复制、分析功能
- **对话控制**：支持连续响应模式和自定义结束条件

### 2. 🎭 场景配置系统
- **YAML编辑器**：可视化YAML配置编辑，支持语法高亮
- **多生成模式**：
  - 模板替换生成：基于预定义模板快速生成场景
  - LLM智能生成：利用AI模型自动创建场景内容
  - 直接输出生成：支持自定义格式的直接输出
- **场景预览**：实时预览生成的场景效果
- **自动填充**：智能字段填充功能，简化配置过程

### 3. ⚡ 并行测试系统
- **批量测试**：同时运行多个对话测试场景
- **实时监控**：可视化显示测试进度和状态
- **智能评估**：
  - 自动错误检测和分类
  - 多专家评分体系
  - 详细评估报告
- **结果导出**：支持CSV格式导出测试结果

### 4. 📊 智能分析系统
- **心理分析**：客户心理状态和情绪分析
- **质量评估**：对话质量和合规性检查
- **销售绩效**：销售技巧和效果评估
- **综合报告**：多维度分析结果整合

### 5. 🎛️ 模型配置管理
- **多服务商支持**：OpenAI、Anthropic、Google、阿里云、智谱AI、DeepSeek、豆包等
- **统一管理**：集中管理所有AI模型的API密钥和参数
- **实时切换**：无缝切换不同的AI服务商和模型
- **参数调优**：灵活调整温度、top-p等模型参数

## 🤖 支持的AI模型和服务商

本平台支持全球主流AI模型和服务商，提供丰富的模型选择：

### 🌐 支持的服务商

| 服务商 | API地址 | 模型数量 | 特色功能 |
|--------|---------|----------|----------|
| **🦄 通义千问** | `dashscope.aliyuncs.com` | 4个 | 阿里云原生，性价比极高 |
| **🔮 OpenAI** | `api.openai.com` | 5个 | GPT-5、GPT-4o等最新模型 |
| **💎 Claude** | `api.anthropic.com` | 5个 | Claude Opus 4、Sonnet 4等顶尖模型 |
| **⭐ Gemini** | `generativelanguage.googleapis.com` | 4个 | Gemini 2.5 Pro/Flash系列 |
| **🔍 DeepSeek** | `api.deepseek.com` | 2个 | 高性价比开源模型 |
| **🌟 智谱AI** | `open.bigmodel.cn` | 6个 | GLM-4.6、GLM-4.5系列 |
| **🆕 豆包** | `ark.cn-beijing.volces.com` | 2个 | 字节跳动豆包模型 |

### 🚀 热门模型推荐

#### 🔥 最强推理模型
- **GPT-5 Chat Latest** - OpenAI最新旗舰模型
- **Claude Opus 4.1** - Anthropic最强模型
- **Gemini 2.5 Pro** - Google最新专业模型

#### ⚡ 最快响应模型
- **Qwen Flash** - 通义千问极速模型
- **Gemini 2.5 Flash** - Google快速模型
- **GLM-4.5 Flash** - 智谱AI闪电模型

#### 💰 最高性价比
- **DeepSeek Chat** - 开源免费模型
- **Qwen3 Max** - 通义千问专业版
- **Doubao Seed 1.6** - 豆包种子模型

## 🏗️ 技术架构

### 系统架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                    🚀 前端界面层                               │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌──────────┐  │
│  │ 主对话界面   │  │ 场景配置界面 │  │ 并行测试界面 │  │ 模型配置 │  │
│  │             │  │             │  │             │  │          │  │
│  │ • 实时对话   │  │ • YAML编辑  │  │ • 批量测试  │  │ • 多模型 │  │
│  │ • 流式输出  │  │ • 多生成器  │  │ • 实时监控  │  │ • API管理│  │
│  └─────────────┘  └─────────────┘  └─────────────┘  └──────────┘  │
└─────────────────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────────────────┐
│                 🎯 业务逻辑层                                   │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌──────────┐  │
│  │ 核心服务    │  │ 场景配置    │  │ 并行测试    │  │ 分析引擎 │  │
│  │             │  │             │  │             │  │          │  │
│  │ • ChatService│  │ • SceneConfig│  │ • TaskOrch  │  │ • 心理分析│  │
│  │ • ApiService │  │ • YamlEditor │  │ • Assessment│  │ • 质量评估│  │
│  └─────────────┘  └─────────────┘  └─────────────┘  └──────────┘  │
└─────────────────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────────────────┐
│                     💾 数据管理层                              │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌──────────┐  │
│  │ 对话数据    │  │ 配置数据    │  │ 测试结果    │  │ 分析报告 │  │
│  │             │  │             │  │             │  │          │  │
│  │ • 消息存储  │  │ • YAML配置  │  │ • CSV导出   │  │ • 多维度 │  │
│  │ • 历史记录  │  │ • 模板管理  │  │ • JSON格式  │  │ • 可视化 │  │
│  └─────────────┘  └─────────────┘  └─────────────┘  └──────────┘  │
└─────────────────────────────────────────────────────────────────┘
```

### 🎯 核心模块详解

#### 1. 🗨️ 主对话系统 (`js/chat.js`, `js/ChatService.js`)
- **ChatService**：核心对话服务，管理对话状态、消息存储、自动响应
- **ChatUIManager**：对话界面管理，处理渲染、交互、消息选择
- **MessageSelectionManager**：高级消息选择和管理功能
- **实时流式输出**：支持实时显示AI模型思考过程

#### 2. 🎭 场景配置系统 (`js/scene-config/`)
- **SceneConfigManager**：场景配置主管理器，协调整个配置流程
- **YamlEditorManager**：专业的YAML配置编辑器，支持语法高亮和验证
- **多生成模式**：
  - **TemplateSubstitutionGenerator**：基于模板的智能替换生成
  - **LLMGenerator**：利用AI模型自动生成场景内容
  - **DirectOutputGenerator**：直接输出模式，支持自定义格式

#### 3. ⚡ 高级并行测试系统 (`js/parallel-test/`)
- **TaskOrchestrator**：智能任务编排器，协调复杂的测试流程
- **ContinuousGenerationService**：连续对话生成，支持长时间对话测试
- **AssessmentService**：智能评估引擎，自动检测对话中的各类问题
- **RatingService**：多专家评分系统，提供专业级的评分评估
- **TaskScheduler**：任务调度器，支持并发控制和队列管理
- **TaskUIManager**：现代化的测试界面，支持实时监控和交互

#### 4. 📊 深度分析引擎 (`js/analysis/`)
- **AnalysisManager**：分析协调器，整合多种分析服务
- **CustomerPsychologyService**：客户心理状态深度分析
- **MessageQualityService**：对话质量和合规性专业评估
- **SalesPerformanceService**：销售技巧和绩效量化分析
- **多维度评估体系**：信息级、警告级、错误级三级评估体系

#### 5. 🎛️ 统一模型配置系统 (`js/config/`)
- **ModelConfig**：集中式模型配置管理
- **ModelConfigUI**：可视化模型配置界面
- **多服务商集成**：统一管理不同AI服务商的API密钥和参数
- **实时切换机制**：无缝切换不同的AI模型和服务商

## 🚀 快速开始

### 📋 系统要求

- **浏览器**：现代浏览器（Chrome 80+、Firefox 75+、Safari 13+、Edge 80+）
- **网络**：稳定的互联网连接（用于访问AI模型API）
- **API密钥**：至少一个主流AI服务商的API密钥
- **开发环境**：支持ES6+模块的现代JavaScript环境

### ⚡ 一键部署

#### 🐍 方法一：Python快速部署（推荐）

```bash
# 克隆项目
git clone <repository-url>
cd GraduationProject

# 启动本地服务器（Python 3）
python -m http.server 8000

# 或使用Python 2
python -m SimpleHTTPServer 8000

# 访问应用
# 打开浏览器访问：http://localhost:8000
```

#### 🟢 方法二：Node.js部署

```bash
# 安装轻量级服务器
npm install -g http-server

# 启动服务器
http-server -p 8000

# 访问应用
# 打开浏览器访问：http://localhost:8000
```

#### 🌐 方法三：PHP部署

```bash
# 启动PHP内置服务器
php -S localhost:8000

# 访问应用
# 打开浏览器访问：http://localhost:8000
```

### 🔧 初始配置

1. **获取API密钥**：
   - 注册至少一个支持的AI服务商账号
   - 获取相应的API密钥

2. **配置模型**：
   - 点击界面右上角的"⚙️ 模型设置"按钮
   - 选择服务商并输入API密钥
   - 选择默认模型并调整参数

3. **开始使用**：
   - 在主对话界面与AI模型进行对话
   - 在场景配置界面创建测试场景
   - 在并行测试界面进行批量测试
   - 查看分析报告获取深度洞察

## 📖 使用指南

### 主对话系统使用

1. **基础对话**：
   - 在消息输入框中输入内容
   - 按Enter或点击发送按钮发送消息
   - AI模型将实时响应并显示流式输出

2. **自动响应模式**：
   - 启用"启用自动响应"开关
   - 设置初始响应和响应提示
   - 系统将自动模拟对话双方

3. **连续响应模式**：
   - 在自动响应基础上启用"启用连续响应"
   - 设置结束条件（轮次限制或正则匹配）
   - 系统将持续生成对话直到满足结束条件

### 场景配置系统使用

1. **YAML配置**：
   - 在YAML编辑器中编辑场景配置
   - 使用语法高亮和验证功能确保配置正确

2. **生成模式选择**：
   - **模板替换**：使用预定义模板和变量
   - **LLM生成**：让AI模型根据上下文生成场景
   - **直接输出**：直接输入场景内容

3. **场景预览与应用**：
   - 点击"生成提示词"按钮预览场景
   - 使用"复制"或"应用"按钮使用生成的场景

### 并行测试系统使用

1. **创建测试任务**：
   - 配置测试参数和场景
   - 设置测试数量和并发限制

2. **监控测试进度**：
   - 实时查看测试进度和状态
   - 观察流式输出和结果生成

3. **分析测试结果**：
   - 查看自动评估和评分结果
   - 导出CSV格式数据进行进一步分析

## 🎯 高级功能

### 自定义分析模型

1. **配置分析模型**：
   - 在主对话界面的分析设置部分
   - 为不同类型的分析选择专门的模型
   - 调整分析温度和参数

2. **多维度分析**：
   - 心理分析：评估客户心理状态和情绪
   - 质量分析：检查对话质量和合规性
   - 销售分析：评估销售技巧和效果

### 预设管理系统

1. **使用预设**：
   - 在预设管理界面浏览可用预设
   - 一键应用预设配置到当前会话

2. **创建和管理预设**：
   - 保存当前配置为自定义预设
   - 编辑、删除和导出预设

### 调试和开发工具

1. **调试覆盖层**：
   - 按F12或点击调试按钮打开调试面板
   - 查看API调用、性能指标和错误日志

2. **开发者控制台**：
   - 使用浏览器开发者工具进行深度调试
   - 查看网络请求和JavaScript控制台输出

## 🔧 故障排除

### 常见问题

1. **API密钥错误**：
   - 确保API密钥正确且有效
   - 检查服务商和模型是否匹配

2. **网络连接问题**：
   - 确保网络连接稳定
   - 检查防火墙和代理设置

3. **模型响应慢**：
   - 尝试切换到更快的模型
   - 调整温度和top_p参数

4. **分析功能不工作**：
   - 确保已配置分析模型
   - 检查API密钥权限

### 性能优化

1. **浏览器性能**：
   - 使用最新版Chrome或Firefox
   - 关闭不必要的浏览器扩展

2. **API调用优化**：
   - 合理设置请求频率限制
   - 使用流式输出减少等待时间

## 🤝 贡献指南

我们欢迎社区贡献！请遵循以下步骤：

1. Fork 项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 创建 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 🙏 致谢

- 感谢所有AI服务商提供的强大API
- 感谢开源社区的支持和贡献
- 特别感谢所有测试用户提供的宝贵反馈

## 📞 联系我们

如有问题或建议，请通过以下方式联系：

- 提交 Issue: [GitHub Issues](https://github.com/your-repo/issues)
- 邮箱: your-email@example.com

---

**⭐ 如果这个项目对您有帮助，请给我们一个星标！**
